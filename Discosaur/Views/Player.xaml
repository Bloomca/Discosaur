<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Discosaur.Views.Player"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:Discosaur.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converters:BoolToPlayPauseGlyphConverter x:Key="PlayPauseGlyphConverter" />
        <converters:SliderPercentToTimeConverter x:Key="SliderTimeConverter" />
    </UserControl.Resources>

    <StackPanel Padding="8,4,8,4" Spacing="4">
        <!-- Track info + volume icon -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <TextBlock x:Name="TrackNameText"
                           Text="No track playing"
                           FontSize="14"
                           FontFamily="Nirmala UI"
                           TextTrimming="CharacterEllipsis"
                           MaxLines="1" />
                <TextBlock x:Name="BandNameText"
                           Text=""
                           FontSize="12"
                           TextTrimming="CharacterEllipsis"
                           Foreground="#999999"
                           MaxLines="1" />
            </StackPanel>

            <Button x:Name="VolumeButton"
                    Grid.Column="1"
                    Click="Volume_Click"
                    RightTapped="Volume_RightTapped"
                    Width="36" Height="36" Padding="0"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center">
                <FontIcon x:Name="VolumeIcon" Glyph="&#xE995;" FontSize="20" />
            </Button>
        </Grid>

        <!-- Progress bar with time labels -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Slider
                x:Name="ProgressSlider"
                Grid.Column="0"
                Minimum="0"
                Maximum="100"
                Value="0"
                ThumbToolTipValueConverter="{StaticResource SliderTimeConverter}"
                VerticalAlignment="Center" />

            <TextBlock
                x:Name="TimeText"
                Grid.Column="1"
                Text="0:00/0:00"
                FontSize="16"
                FontFamily="Consolas"
                VerticalAlignment="Center"
                Margin="8,0,0,0" />
        </Grid>

        <!-- Transport controls -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
            <Button x:Name="PreviousButton" Click="Previous_Click" Width="36" Height="36" Padding="0">
                <FontIcon Glyph="&#xE892;" FontSize="16" />
            </Button>
            <Button Click="PlayPause_Click" Width="36" Height="36" Padding="0">
                <FontIcon Glyph="{x:Bind Playback.IsPlaying, Converter={StaticResource PlayPauseGlyphConverter}, Mode=OneWay}" FontSize="16" />
            </Button>
            <Button x:Name="NextButton" Click="Next_Click" Width="36" Height="36" Padding="0">
                <FontIcon Glyph="&#xE893;" FontSize="16" />
            </Button>
            <Button Click="Stop_Click" Width="36" Height="36" Padding="0">
                <FontIcon Glyph="&#xE71A;" FontSize="16" />
            </Button>

            <Border Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="4,8" />

            <Button x:Name="RepeatButton" Click="Repeat_Click" Width="36" Height="36" Padding="0">
                <FontIcon x:Name="RepeatIcon" Glyph="&#xE8EE;" FontSize="16" Opacity="0.4" />
            </Button>
            <Button x:Name="ShuffleButton" Click="Shuffle_Click" Width="36" Height="36" Padding="0">
                <FontIcon x:Name="ShuffleIcon" Glyph="&#xE8B1;" FontSize="16" Opacity="0.4" />
            </Button>

            <Border Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="4,8" />

            <Button x:Name="CollapseButton" Click="Collapse_Click" Width="36" Height="36" Padding="0">
                <FontIcon x:Name="CollapseIcon" Glyph="&#xE70D;" FontSize="16" />
            </Button>
        </StackPanel>
    </StackPanel>
</UserControl>
